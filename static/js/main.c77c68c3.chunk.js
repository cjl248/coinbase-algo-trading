(this["webpackJsonpcoinbase-algo-trading"]=this["webpackJsonpcoinbase-algo-trading"]||[]).push([[0],{87:function(e,t,c){},88:function(e,t,c){},94:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c(0),s=c.n(n),r=c(11),i=c.n(r),o=(c(87),c(16)),l=c(17),u=c(21),d=c(20);c(88);function j(){return Object(a.jsx)("div",{className:"main-title",children:"portfoliobase"})}function b(e){var t=e.title,c=e.icon,n=e.activePage,s=e.setActivePage;return Object(a.jsx)("div",{className:n===t?"active-menu-option":"menu-option",onClick:function(){s(t,"h")},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"item-icon",children:c}),Object(a.jsx)("span",{className:"item-text",children:t[0].toUpperCase()+t.slice(1)})]})})}var h=c(68),p=c.n(h),v=c(70),m=c.n(v),O=c(71),f=c.n(O),g=c(72),x=c.n(g),y={home:Object(a.jsx)(p.a,{}),portfolio:Object(a.jsx)(m.a,{}),prices:Object(a.jsx)(f.a,{}),algorithms:Object(a.jsx)(x.a,{})},N=function(e,t){return Object.keys(y).map((function(c,n){return Object(a.jsx)(b,{title:c,icon:y[c],activePage:e,setActivePage:t},n)}))};function S(e){var t=e.activePage,c=e.setActivePage;return Object(a.jsx)("div",{className:"menu-options-container",children:N(t,c)})}function k(e){var t=e.activePage,c=e.setActivePage;return Object(a.jsxs)("div",{className:"side-menu-container",children:[Object(a.jsx)(j,{}),Object(a.jsx)(S,{activePage:t,setActivePage:c})]})}var C=c(10),A=c(128);function P(e){var t=e.activePage,c=e.activateModal;return Object(a.jsxs)("div",{className:"main-navbar",children:[Object(a.jsx)("div",{className:"navbar-active-page",children:t[0].toUpperCase()+t.slice(1)}),Object(a.jsx)("div",{className:"navbar-middle-placeholder"}),Object(a.jsx)("div",{className:"navbar-buttons",children:Object(a.jsx)(A.a,{color:"primary",variant:"contained",onClick:function(){return c()},children:"BUY / SELL"})})]})}var w=c(23),D=c.n(w),F=c(14),U=c(15),_=c(36),T=c(33);function B(){return Object(a.jsx)("h3",{className:"loading",children:"Loading..."})}var E="https://coinbase-algo-backend.herokuapp.com/c_orders";function M(e){var t=e.orders,c=e.setOrders,n=s.a.useState(!1),r=Object(C.a)(n,2),i=r[0],o=r[1],l=s.a.useState(new AbortController),u=Object(C.a)(l,1)[0],d=function(e,t){return Number.parseFloat(e).toPrecision(t)},j=function(){var e=Object(T.a)(D.a.mark((function e(){var a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={method:"GET",headers:{"Content-Type":"application/json",Accepts:"application/json"},signal:u.signal},0!==t.length){e.next=16;break}if(e.prev=2,!i){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,fetch(E,a);case 9:e.sent.json().then((function(e){return o(!0),c(e)}));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),"AbortError"===e.t0.name?console.warn("Orders fetch aborted!"):console.log("Error: ".concat(e.t0));case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(T.a)(D.a.mark((function e(a){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={method:"DELETE",headers:{"Content-Type":"application/json",Accepts:"application/json"}},e.next=3,fetch("".concat(E,"/").concat(a),n);case 3:e.sent.json().then((function(){var e=t.filter((function(e){return e.id!==a}));c(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return s.a.useEffect((function(){return 0===t.length&&j(),function(){t.length>0&&u.abort()}})),Object(a.jsxs)("div",{className:"orders-container",children:[Object(a.jsx)("div",{className:"orders-title",children:"Orders"}),Object(a.jsxs)("div",{className:"orders-headers",children:[Object(a.jsx)("div",{children:"Product"}),Object(a.jsx)("div",{children:"Type"}),Object(a.jsx)("div",{children:"Side"}),Object(a.jsx)("div",{children:"Price"}),Object(a.jsx)("div",{children:"Size"}),Object(a.jsx)("div",{children:"Cancel"})]}),Object(a.jsx)("div",{className:"orders",children:0===t.length?i?Object(a.jsx)("h3",{children:"You have no orders..."}):Object(a.jsx)(B,{}):t.length>0?t.map((function(e){return Object(a.jsxs)("div",{className:"order",children:[Object(a.jsx)("div",{children:e.product_id}),Object(a.jsx)("div",{children:e.type.toUpperCase()}),Object(a.jsx)("div",{children:e.side.toUpperCase()}),Object(a.jsx)("div",{children:d(e.price,6)}),Object(a.jsx)("div",{children:d(e.size,4)}),Object(a.jsx)(A.a,{style:{width:"5%",height:"25px"},color:"secondary",variant:"contained",onClick:function(){b(e.id)},children:"X"})]},e.id)})):void 0})]})}var I=c(73),R=c.n(I),G=c(74),L=c.n(G);function $(e){var t=e.accounts,c=e.prices,n=(e.calculatePortfolioBalance,e.dollarBalance),r=e.dollarcoinBalance;s.a.useEffect((function(){l.length<=c.length-1&&v()}));var i=s.a.useState([]),o=Object(C.a)(i,2),l=o[0],u=o[1],d=s.a.useState(0),j=Object(C.a)(d,2),b=j[0],h=j[1],p=function(e){return Number.parseFloat(e).toPrecision(6)},v=function(){if(c){var e=0,n=c.map((function(c){var a=function(a){var n=c[a],s=t.find((function(e){return e.currency===n.currency}));s&&(e+=n.price*s.balance,u([].concat(Object(_.a)(l),[Object(F.a)({},s.currency,p(n.price*s.balance))])))};for(var n in c)a(n);return 0}));return h(e),n}return Object(a.jsx)(B,{})};return Object(a.jsxs)("div",{className:"assets-container",children:[Object(a.jsx)("div",{className:"assets-title",children:"Assets: $".concat(p(parseFloat(b)+parseFloat(n)+parseFloat(r)))}),Object(a.jsxs)("div",{className:"assets",children:[Object(a.jsx)("div",{className:"asset-section-titles",children:"Dollar Values"}),[].concat(Object(_.a)(l),[{USD:n},{USDC:r}]).map((function(e,t){for(var c in e)return Object(a.jsxs)("div",{className:"asset",children:[Object(a.jsxs)("span",{className:"icon-currency-group",children:[Object(a.jsx)(L.a,{}),Object(a.jsx)("span",{className:"currency",children:c})]}),Object(a.jsx)("span",{className:"balance",children:"$".concat(p(e[c]))})]},t);return null}))]}),Object(a.jsxs)("div",{className:"assets",children:[Object(a.jsx)("div",{className:"asset-section-titles",children:"Nominal Values"}),t?t.map((function(e,t){return Object(a.jsxs)("div",{className:"asset",children:[Object(a.jsxs)("span",{className:"icon-currency-group",children:[Object(a.jsx)(R.a,{}),Object(a.jsx)("span",{className:"currency",children:e.currency})]}),Object(a.jsx)("span",{className:"balance",children:e.balance})]},t)})):Object(a.jsx)(B,{})]})]})}var V=function(e){var t=e.setActivePage;return Object(a.jsxs)("div",{className:"signals-container",children:[Object(a.jsx)("div",{className:"signals-title",children:"Algorithms"}),Object(a.jsxs)("div",{className:"signals-group",children:[Object(a.jsxs)("section",{className:"algo-signal",children:[Object(a.jsx)("div",{className:"title",children:"Bollinger Bands"}),Object(a.jsx)(A.a,{variant:"contained",color:"primary",className:"button",onClick:function(){t("algorithms","b")},children:"Go"})]}),Object(a.jsxs)("section",{className:"algo-signal",children:[Object(a.jsx)("div",{className:"title",children:"Fibonacci Retracement"}),Object(a.jsx)(A.a,{variant:"contained",color:"primary",className:"button",onClick:function(){t("algorithms","f")},children:"Go"})]})]})]})},J="https://coinbase-algo-backend.herokuapp.com/c_accounts",z="https://coinbase-algo-backend.herokuapp.com/c_products",W=function(e){Object(u.a)(c,e);var t=Object(d.a)(c);function c(){var e;Object(o.a)(this,c);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).precise=function(e){return Number.parseFloat(e).toPrecision(6)},e.state={accounts:[],prices:[],dollarBalance:0,dollarcoinBalance:0,controller:new AbortController},e.getAccounts=Object(T.a)(D.a.mark((function t(){var c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"GET",headers:{"Content-Type":"application/json",Accepts:"application/json"},signal:e.state.controller.signal},t.prev=1,t.next=4,fetch(J,c);case 4:t.sent.json().then((function(t){e.setState({accounts:t},(function(){var t={method:"GET",headers:{"Content-Type":"application/json",Accepts:"application/json"},signal:e.state.controller.signal};return e.state.accounts.map((function(c){if(c.balance>0&&"USD"!==c.currency&&"USDC"!==c.currency){var a=c.currency,n="".concat(z,"?product=").concat(a,"-USD");fetch(n,t).then((function(e){return e.json()})).then((function(t){e.setState({prices:[].concat(Object(_.a)(e.state.prices),[Object(F.a)({},a,Object(U.a)({currency:a},t))])})})).catch((function(e){console.warn("Error: ".concat(e))}))}else c.balance>0&&"USDC"===c.currency?e.setState({dollarcoinBalance:c.balance}):c.balance>0&&"USD"===c.currency&&e.setState({dollarBalance:c.balance});return null}))}))})),t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(1),"AbortError"!==t.t0.name){t.next=14;break}console.warn("Accounts fetch aborted."),t.next=15;break;case 14:throw t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,8]])}))),e}return Object(l.a)(c,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"home-container",children:[Object(a.jsx)(M,{accounts:this.state.accounts,orders:this.props.orders,setOrders:this.props.setOrders}),Object(a.jsx)($,{accounts:this.state.accounts,prices:this.state.prices,dollarBalance:this.state.dollarBalance,dollarcoinBalance:this.state.dollarcoinBalance}),Object(a.jsx)(V,{setActivePage:this.props.setActivePage})]})}},{key:"componentDidMount",value:function(){this.getAccounts()}},{key:"componentWillUnmount",value:function(){this.state.controller.abort()}}]),c}(s.a.Component),H="wss://ws-feed.pro.coinbase.com",X=function(e){Object(u.a)(c,e);var t=Object(d.a)(c);function c(){var e;Object(o.a)(this,c);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={socket:new WebSocket(H),prices:{},dollarValue:0,dollarCoinValue:0,totalValue:0},e.precise=function(e,t){return Number.parseFloat(e).toPrecision(t)},e.getProductIds=function(){return e.props.activeAccounts.map((function(e){return"USD"!==e.currency||"USDC"!==e.currency?"".concat(e.currency,"-USD"):null}))},e.setDollarAccounts=function(){return e.props.activeAccounts.map((function(t){return"USD"===t.currency?e.setState({dollarValue:t.balance}):"USDC"===t.currency?e.setState({dollarCoinValue:t.balance}):null}))},e.renderInvested=function(){return e.props.activeAccounts.map((function(t,c){for(var n in e.state.prices)if(n.slice(0,3)===t.currency||n.slice(0,4)===t.currency){var s=e.getPortfolioPercentage(t.balance*e.state.prices[n]);return Object(a.jsxs)("div",{className:"p-price",children:[Object(a.jsx)("div",{className:"p-currency",children:"".concat(t.currency,": ")}),Object(a.jsx)("div",{className:"p-value",children:"$".concat(e.precise(t.balance*e.state.prices[n],5))}),Object(a.jsx)("div",{className:"p-percentage",children:"".concat(s,"%")})]},c)}return null}))},e.getTotalValue=function(){var t=e.props.activeAccounts.reduce((function(t,c){if("USD"===c.currency||"USDC"===c.currency)return t+Number.parseFloat(c.balance);var a=e.state.prices["".concat(c.currency,"-USD")],n=c.balance;return t+Number.parseFloat(a)*Number.parseFloat(n)}),0);e.setState({totalValue:t})},e.getPortfolioPercentage=function(t){return 0===e.state.totalValue&&0===t?0:e.state.totalvalue===t||0===e.state.totalValue&&t>0?100:e.precise(Number.parseFloat(t)/Number.parseFloat(e.state.totalValue)*100,4)},e}return Object(l.a)(c,[{key:"componentDidMount",value:function(){var e=this;this.setDollarAccounts();var t=this.state.socket;t.onopen=function(){var c={type:"subscribe",product_ids:e.getProductIds(),channels:[{name:"ticker",product_ids:e.getProductIds()}]};t.send(JSON.stringify(c))},t.onmessage=function(t){try{var c=JSON.parse(t.data);return"ticker"===c.type?e.getProductIds().map((function(t){return c.product_id===t?(e.setState({prices:Object(U.a)(Object(U.a)({},e.state.prices),{},Object(F.a)({},t,c.price))}),e.getTotalValue()):null})):null}catch(a){return void console.log("Not valid JSON: ",JSON.parse(t.data))}},t.onerror=function(e){try{console.log("There was an error: ",e)}catch(t){return void console.log("There was an error: ",t)}},t.onclose=function(){return null}}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"portfolio-container",children:[Object(a.jsxs)("div",{className:"portfolio-balance-container",children:[Object(a.jsx)("div",{className:"p-balance-title",children:"Invested"}),Object(a.jsx)("div",{className:"balances",children:this.renderInvested()})]}),Object(a.jsxs)("div",{className:"portfolio-assets-container",children:[Object(a.jsx)("div",{className:"p-assets-title",children:"Available"}),Object(a.jsxs)("div",{className:"usd-group",children:[Object(a.jsx)("span",{className:"usd-label",children:"USD: "}),Object(a.jsx)("span",{className:"usd-value",children:"$".concat(this.precise(this.state.dollarValue,5))}),Object(a.jsx)("span",{className:"percentage",children:"".concat(this.getPortfolioPercentage(this.state.dollarValue),"%")})]}),Object(a.jsxs)("div",{className:"usd-group",children:[Object(a.jsx)("span",{className:"usd-label",children:"USDC: "}),Object(a.jsx)("span",{className:"usd-value",children:"$".concat(this.precise(this.state.dollarCoinValue,2))}),Object(a.jsx)("span",{className:"percentage",children:"".concat(this.getPortfolioPercentage(this.state.dollarCoinValue),"%")})]})]})]})}},{key:"componentWillUnmount",value:function(){this.state.socket.close()}}]),c}(s.a.Component),Y="https://coinbase-algo-backend.herokuapp.com/c_products/list",q="wss://ws-feed.pro.coinbase.com",K=function(e){Object(u.a)(c,e);var t=Object(d.a)(c);function c(){var e;Object(o.a)(this,c);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={socket:new WebSocket(q),controller:new AbortController,productList:[],prices:{},sortedPrices:[],sorting:!1},e.precise=function(e,t){return Number.parseFloat(e).toPrecision(t)},e.getAllProducts=Object(T.a)(D.a.mark((function t(){var c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"GET",headers:{"Content-Type":"application/json",Accepts:"application/json"},signal:e.state.controller.signal},t.next=3,fetch(Y,c);case 3:t.sent.json().then((function(t){var c=t.map((function(e){return e.id}));e.setState({productList:c})}));case 5:case"end":return t.stop()}}),t)}))),e.getProductIds=function(){return e.props.activeAccounts.map((function(e){return"".concat(e.currency,"-USD")}))},e.renderPrices=function(t){var c=e.state.prices;return Array.isArray(t)?t.map((function(t,c){return Object(a.jsxs)("div",{className:"price",children:[Object(a.jsx)("span",{className:"currency",children:"".concat(t.name,": ")}),Object(a.jsx)("span",{className:"exchange",children:"$".concat(e.precise(t.price,7))||!1})]},c)})):Object.keys(c).map((function(t,n){return Object(a.jsxs)("div",{className:"price",children:[Object(a.jsx)("span",{className:"currency",children:"".concat(t,": ")}),Object(a.jsx)("span",{className:"exchange",children:"$".concat(e.precise(c[t],7))||!1})]},n)}))},e.handleGetSorted=function(t){e.setState({sorting:!0},(function(){var c=e.state.prices,a=[];for(var n in c)a.push({name:n,price:c[n]});var s=[];"DESC"===t&&(s=a.sort((function(e,t){return t.price-e.price}))),"ASC"===t&&(s=a.sort((function(e,t){return e.price-t.price}))),e.setState({sortedPrices:s})}))},e.handleGetUnsorted=function(){e.setState({sorting:!1})},e.resolveSort=function(){return e.state.sorting?e.renderPrices(e.state.sortedPrices):e.renderPrices(e.state.prices)},e}return Object(l.a)(c,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"prices-container",children:[Object(a.jsxs)("span",{className:"header-container",children:[Object(a.jsx)("div",{className:"prices-header",children:"Live Cryptocurrency Prices"}),Object(a.jsxs)("span",{className:"prices-button-group",children:[Object(a.jsxs)("section",{className:"sort-section",children:[Object(a.jsx)("span",{className:"sort-label",children:"Sort By Price: "}),Object(a.jsx)(A.a,{className:"sort-button",color:"primary",variant:"contained",onClick:function(){e.handleGetSorted("ASC")},children:"Ascending"}),Object(a.jsx)(A.a,{className:"sort-button",color:"primary",variant:"contained",onClick:function(){e.handleGetSorted("DESC")},children:"Descending"})]}),Object(a.jsxs)("section",{className:"live-group",children:[Object(a.jsx)("span",{className:"sort-label",children:"Live Feed: "}),Object(a.jsx)(A.a,{className:"sort-button",color:"secondary",variant:"contained",onClick:this.handleGetUnsorted,children:"Go Live"})]})]})]}),Object(a.jsx)("div",{className:"prices",children:this.resolveSort()})]})}},{key:"componentDidMount",value:function(){var e=this;this.getAllProducts().then((function(){var t=new WebSocket(q);e.setState({socket:t},(function(){e.state.socket.onopen=function(){var t={type:"subscribe",product_ids:e.state.productList,channels:[{name:"ticker",product_ids:e.state.productList}]};e.state.socket.send(JSON.stringify(t))},e.state.socket.onmessage=function(t){try{var c=JSON.parse(t.data);if("ticker"===c.type)return e.state.productList.map((function(t){return c.product_id===t&&e.setState({prices:Object(U.a)(Object(U.a)({},e.state.prices),{},Object(F.a)({},t,c.price))}),0}))}catch(a){return console.log("Not valid JSON: ",t.data),null}},e.state.socket.onerror=function(e){console.warn("There was an error: ",e)}}))})).catch((function(e){console.warn("Error: ".concat(e))}))}},{key:"componentWillUnmount",value:function(){this.state.socket.close(),this.state.controller.abort()}}]),c}(s.a.Component),Q=function(e){Object(u.a)(c,e);var t=Object(d.a)(c);function c(){var e;Object(o.a)(this,c);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).precise=function(e){return Number.parseFloat(e).toPrecision(5)},e.renderBands=function(){var t=e.props.bands;return Object.keys(t).map((function(c){return"USDC-USD"!==c&&"USD-USD"!==c?Object.keys(t[c]).map((function(n,s){var r=t[c][n];return Object(a.jsxs)("div",{className:"b-currency",children:[Object(a.jsx)("div",{className:"b-currency-title",children:"Currency: ".concat(c)}),Object(a.jsxs)("div",{className:"b-level",children:[Object(a.jsx)("div",{className:"level-title",children:"Standard Deviation: ".concat(n)}),Object(a.jsx)("div",{className:"b-level",children:"$".concat(e.precise(r[0]))}),Object(a.jsx)("div",{className:"b-level",children:"$".concat(e.precise(r[1]))}),Object(a.jsx)("div",{className:"b-level",children:"$".concat(e.precise(r[2]))})]})]},s)})):null}))},e.handleGranularityChange=function(t){e.props.setGranularity(t)},e}return Object(l.a)(c,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"bands-main-title-section",children:[Object(a.jsx)("div",{className:"title",children:"Bollinger Bands"}),Object(a.jsxs)("div",{className:"granularity-options",children:[Object(a.jsx)("div",{className:"current-granularity",children:"Granularity: ".concat(300*this.props.granularity/60/60/24," D")}),Object(a.jsx)(A.a,{style:{height:"30px"},color:"primary",variant:"contained",onClick:function(){e.handleGranularityChange(3600)},children:"12.5 Days"}),Object(a.jsx)(A.a,{style:{height:"30px"},color:"primary",variant:"contained",onClick:function(){e.handleGranularityChange(21600)},children:"75 Days"}),Object(a.jsx)(A.a,{style:{height:"30px"},color:"primary",variant:"contained",onClick:function(){e.handleGranularityChange(86400)},children:"300 Days"})]})]}),Object(a.jsx)("div",{className:"bands-container",children:this.renderBands()})]})}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}}]),c}(s.a.Component),Z=c(129),ee=c(137),te=c(134),ce=c(136);function ae(e){var t=e.fibonacci,c=e.activeAccounts,n=e.activeFibonacciCurrency,s=e.setActiveFibonacciCurrency,r=function(e,t){return Number.parseFloat(e).toPrecision(t)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"fibonacci-header",children:[Object(a.jsx)("div",{className:"fibonacci-main-title",children:"Fibonacci Retracement"}),Object(a.jsxs)(Z.a,{variant:"outlined",style:{width:"200px"},children:[Object(a.jsx)(ee.a,{id:"demo-simple-select-outlined-label",children:"Currency"}),Object(a.jsx)(te.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:n,onChange:function(e){return s(e.target.value)},label:"Age",children:c.map((function(e,t){return"USDC"!==e.currency&&"USD"!==e.currency?Object(a.jsx)(ce.a,{value:"".concat(e.currency,"-USD"),children:e.currency},t):null}))})]})]}),Object(a.jsxs)("div",{className:"fibonacci-container",children:[Object(a.jsx)("h2",{children:"Statistics"}),Object(a.jsxs)("section",{className:"fibonacci-stats",children:[Object(a.jsxs)("div",{className:"day-stats",children:[Object(a.jsx)("h3",{children:"Day Stats"}),t&&t.day_stats?Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"high",children:[Object(a.jsx)("span",{className:"label",children:"High: "}),Object(a.jsx)("span",{className:"stat",children:"$".concat(r(t.day_stats.high,7))})]},"high"),Object(a.jsxs)("div",{className:"current",children:[Object(a.jsx)("span",{className:"label",children:"Current: "}),Object(a.jsx)("span",{className:"stat",children:"$".concat(r(t.day_stats.last,7))})]},"current"),Object(a.jsxs)("div",{className:"low",children:[Object(a.jsx)("span",{className:"label",children:"Low: "}),Object(a.jsx)("span",{className:"stat",children:"$".concat(r(t.day_stats.low,7))})]},"low")]}):Object(a.jsx)("h1",{children:"Loading day stats..."})]},"day"),Object(a.jsxs)("div",{className:"historical-stats",children:[Object(a.jsx)("h3",{children:"Historical Stats"}),t&&t.historical_stats?Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"max",children:[Object(a.jsx)("span",{className:"label",children:"Max: "}),Object(a.jsx)("span",{className:"stat",children:"$".concat(r(t.historical_stats.max,7))})]},"max"),Object(a.jsxs)("div",{className:"mean",children:[Object(a.jsx)("span",{className:"label",children:"Mean: "}),Object(a.jsx)("span",{className:"stat",children:"$".concat(r(t.historical_stats.middle,7))})]},"mean"),Object(a.jsxs)("div",{className:"min",children:[Object(a.jsx)("span",{className:"label",children:"Min: "}),Object(a.jsx)("span",{className:"stat",children:"$".concat(r(t.historical_stats.min,7))})]},"min")]}):Object(a.jsx)("h1",{children:"Loading historical stats..."})]},"historical")]}),Object(a.jsxs)("section",{className:"combined-stats-container",children:[Object(a.jsx)("h2",{children:"Fibonacci Breakpoints"}),function(){if(t&&t.historical_stats&&t.day_stats){var e=[23.6,38.2,61.8,78.6],c=t.historical_stats,n=c.max,s=c.min,i=t.day_stats,o=i.high,l=i.last,u=n-i.low,d=o-s,j=e.map((function(e,t){var c,n=(c=.01*e*u,parseFloat(l)+parseFloat(c));return Object(a.jsxs)("li",{className:"breakpoint",children:[Object(a.jsx)("span",{className:"label",children:"".concat(e,"%: ")}),Object(a.jsx)("span",{className:"stat",children:" $".concat(r(n,7))})]},t)})),b=e.map((function(e,t){var c,n=(c=.01*e*d,parseFloat(l)-parseFloat(c));return Object(a.jsxs)("li",{className:"breakpoint",children:[Object(a.jsx)("span",{className:"label",children:"".concat(e,"%: ")}),Object(a.jsx)("span",{className:"stat",children:" $".concat(r(n,7))})]},t)}));return Object(a.jsxs)("section",{className:"combined-stats",children:[Object(a.jsx)("p",{children:"Today's LOW is below the historical MAX by $".concat(r(u,6),". Fibonacci breakpoints on a bounce up are at: ")}),Object(a.jsx)("ul",{className:"below-high",children:j}),Object(a.jsx)("p",{children:"Today's HIGH is above the historical MIN by $".concat(r(d,6),". Fibonacci breakpoints on a drop down are at:")}),Object(a.jsx)("ul",{className:"above-high",children:b})]})}return Object(a.jsx)("h1",{children:"Loading combined stats..."})}()]})]})]})}function ne(){return Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"moving-averages-header",children:Object(a.jsx)("div",{className:"moving-averages-title",children:"Moving Averages"})}),Object(a.jsx)("h3",{className:"moving-averages-main",children:"Coming soon..."})]})}var se="https://coinbase-algo-backend.herokuapp.com/c_products",re="wss://ws-feed.pro.coinbase.com",ie=function(e){Object(u.a)(c,e);var t=Object(d.a)(c);function c(e){var a;return Object(o.a)(this,c),(a=t.call(this,e)).state={socket:new WebSocket(re),controller:new AbortController,prices:{},bands:{},granularity:3600,fibonacciRetracement:{},activeFibonacciCurrency:"BTC-USD"},a.setActiveFibonacciCurrency=function(e){a.setState({activeFibonacciCurrency:e})},a.setGranularity=function(e){a.setState({granularity:e})},a.getProductIds=function(){return a.props.activeAccounts.map((function(e){return"".concat(e.currency,"-USD")}))},a.getFibonacciRetracement=function(e,t){var c={method:"GET",headers:{"Content-Type":"application/json",Accepts:"application/json"},signal:a.state.controller.signal},n="".concat(se,"/get_fibonacci_retracement?product=").concat(e,"&granularity=").concat(t);fetch(n,c).then((function(e){return e.json()})).then((function(e){a.setState({fibonacciRetracement:e})})).catch((function(e){console.warn("There was an error: ".concat(e))}))},a.getBands=function(e,t){var c={method:"GET",headers:{"Content-Type":"application/json",Accepts:"application/json"},signal:a.state.controller.signal},n="".concat(se,"/get_bands?product=").concat(e,"&granularity=").concat(t);fetch(n,c).then((function(e){return e.json()})).then((function(t){a.setState({bands:Object(U.a)(Object(U.a)({},a.state.bands),{},Object(F.a)({},e,t))})})).catch((function(e){console.warn("There was an error: ".concat(e))}))},a.getAllBands=function(){return a.getProductIds().map((function(e){return a.getBands(e,a.state.granularity)}))},a.scrollPage=function(){var e=a.props.activeSection;"b"===e&&a.bollRef.current.scrollIntoView({behavior:"smooth",block:"start"}),"f"===e&&a.fibRef.current.scrollIntoView({behavior:"smooth",block:"start"}),"m"===e&&a.avgRef.current.scrollIntoView({behavior:"smooth",block:"end"})},a.bollRef=s.a.createRef(),a.fibRef=s.a.createRef(),a.avgRef=s.a.createRef(),a}return Object(l.a)(c,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"algorithms-container",children:[Object(a.jsx)("div",{className:"bollinger-bands",ref:this.bollRef,children:Object(a.jsx)(Q,{bands:this.state.bands,granularity:this.state.granularity,setGranularity:this.setGranularity})}),Object(a.jsx)("div",{className:"fibonacci-retracement",ref:this.fibRef,children:Object(a.jsx)(ae,{fibonacci:this.state.fibonacciRetracement,activeAccounts:this.props.activeAccounts,activeFibonacciCurrency:this.state.activeFibonacciCurrency,setActiveFibonacciCurrency:this.setActiveFibonacciCurrency})}),Object(a.jsx)("div",{className:"moving-averages",ref:this.avgRef,children:Object(a.jsx)(ne,{})})]})}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(this.state.granularity!==t.granularity){var c=this.state,a=c.granularity,n=c.activeFibonacciCurrency;return this.getAllBands(),this.getFibonacciRetracement(n,a),null}if(this.state.activeFibonacciCurrency!==t.activeFibonacciCurrency){var s=this.state,r=s.granularity,i=s.activeFibonacciCurrency;return this.getFibonacciRetracement(i,r),null}return null}},{key:"componentDidUpdate",value:function(){}},{key:"componentDidMount",value:function(){var e=this;this.scrollPage();var t=this.state,c=t.granularity,a=t.activeFibonacciCurrency;this.getAllBands(),this.getFibonacciRetracement(a,c);var n=new WebSocket(re);this.setState({socket:n},(function(){e.state.socket.onopen=function(){var t={type:"subscribe",product_ids:e.getProductIds(),channels:[{name:"ticker",product_ids:e.getProductIds()}]};e.state.socket.send(JSON.stringify(t))},e.state.socket.onmessage=function(t){try{var c=JSON.parse(t.data);if("ticker"===c.type)return e.getProductIds().map((function(t){return c.product_id===t?e.setState({prices:Object(U.a)(Object(U.a)({},e.state.prices),{},Object(F.a)({},t,c.price))}):null}))}catch(a){return void console.log("Not valid JSON: ",t.data)}},e.state.socket.onerror=function(e){console.warn("There was an error: ",e)}}))}},{key:"componentWillUnmount",value:function(){this.state.socket.close(),this.state.controller.abort()}}]),c}(s.a.Component),oe=c(133),le=c(132),ue=c(135);function de(e){var t=e.type,c=e.buy,n=void 0===c?null:c,s=e.toggleBuy,r=void 0===s?null:s,i=e.marketOrder,o=void 0===i?null:i,l=e.toggleMarketOrder,u=void 0===l?null:l,d=e.setMessage;return Object(a.jsx)(le.a,{component:"div",children:Object(a.jsxs)(oe.a,{component:"label",container:!0,alignItems:"center",spacing:0,children:[Object(a.jsx)(oe.a,{item:!0,className:"switch-labels",style:{color:!1===n||!1===o?"#0B47E4":""},children:"action"===t?"Buy":"order"===t?"Market":void 0}),Object(a.jsx)(oe.a,{item:!0,children:Object(a.jsx)(ue.a,{checked:"action"===t?n:"order"===t?o:void 0,onChange:function(){"action"===t&&r(!n),"order"===t&&(d(""),u(!o))},color:"default"})}),Object(a.jsx)(oe.a,{item:!0,className:"switch-labels",style:{color:!0===n||!0===o?"#0B47E4":""},children:"action"===t?"Sell":"order"===t?"Limit":void 0})]})})}var je=c(130),be=c(138);function he(e){var t=e.modal,c=(e.market,e.action),n=e.activeAccounts,r=e.allAccounts,i=void 0===r?[]:r,o=e.setMessage,l=(e.orders,e.setOrders,s.a.useState("")),u=Object(C.a)(l,2),d=u[0],j=u[1],b=s.a.useState(1),h=Object(C.a)(b,2),p=h[0],v=h[1],m=s.a.useState(!1),O=Object(C.a)(m,2),f=O[0],g=O[1],x=s.a.useState(""),y=Object(C.a)(x,2),N=y[0],S=y[1],k=function(){if(""===d)return o("Please choose a product from the dropdown"),S(""),null;var e={method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify({side:c?"sell":"buy",productId:d,funds:p,pin:N})};fetch("http://localhost:3000/c_orders/market_order",e).then((function(e){return e.json()})).then((function(e){e&&e.message?(o(e.message),S("")):e?(o("".concat(e.side.toUpperCase()," order for $").concat(e.funds," of ").concat(e.product_id," placed successfully")),v(""),S(""),g(!1)):o("Something went wrong")}))},P=function(e){o(""),S(e.target.value)};return s.a.useEffect((function(){return function(){!1===t&&(o(""),v(1),g(!1),S(""))}})),Object(a.jsxs)("div",{className:"market-order",children:[Object(a.jsx)("div",{className:"market-title",children:"Market Order"}),Object(a.jsxs)("div",{className:"input-group",style:{display:"flex",flexDirection:"column"},children:[Object(a.jsxs)(Z.a,{variant:"outlined",style:{width:"200px",margin:"10px 0"},children:[Object(a.jsx)(ee.a,{id:"demo-simple-select-outlined-label",children:"Product"}),Object(a.jsx)(te.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:d,onChange:function(e){o(null),j("".concat(e.target.value))},label:"Age",children:!0===c?n.map((function(e,t){return"USDC"!==e.currency&&"USD"!==e.currency?Object(a.jsx)(ce.a,{value:"".concat(e.currency,"-USD"),children:e.currency},t):null})):i.map((function(e,t){return"USDC"!==e.currency&&"USD"!==e.currency?Object(a.jsx)(ce.a,{value:"".concat(e.currency,"-USD"),children:e.currency},t):null}))})]}),Object(a.jsx)(be.a,{type:"number",variant:"outlined",color:"primary",label:"Funds ($)",value:p,onChange:function(e){-1===Math.sign(e.target.value)?(o("Funds must be positive"),v(-e.target.value)):1===Math.sign(e.target.value)?(o(""),v(e.target.value)):e.target.value.toString().includes("-")||!0===isNaN(e.target.value)?(o("Please enter a valid number value for funds"),v(1)):(o("Funds must be a valid number value greater than 0"),v(1))}}),Object(a.jsx)(A.a,{style:{marginTop:"10px"},variant:"contained",color:"primary",onClick:function(){g(!0)},children:"ENTER PIN"})]}),Object(a.jsx)("div",{className:"pin-container",children:f?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"pin-label",children:"Please enter the pin"}),Object(a.jsx)(je.a,{style:{width:"100px",height:"20px"},value:N,type:"password",onChange:P}),Object(a.jsx)(A.a,{style:{width:"100%"},color:"secondary",variant:"contained",onClick:k,children:"PLACE ORDER"})]}):null})]})}function pe(e){var t=e.modal,c=(e.buy,e.action),n=e.activeAccounts,r=e.allAccounts,i=e.setMessage,o=e.orders,l=e.setOrders,u=s.a.useState(""),d=Object(C.a)(u,2),j=d[0],b=d[1],h=s.a.useState(1),p=Object(C.a)(h,2),v=p[0],m=p[1],O=s.a.useState(1),f=Object(C.a)(O,2),g=f[0],x=f[1],y=s.a.useState(!1),N=Object(C.a)(y,2),S=N[0],k=N[1],P=s.a.useState(""),w=Object(C.a)(P,2),D=w[0],F=w[1],U=function(){return c?"sell":"buy"},T=function(){if(""===j)i("Please choose a product from the dropdown"),F("");else{var e={method:"POST",headers:{"Content-Type":"application/json",Accepts:"application/json"},body:JSON.stringify({side:U(),productId:j,size:v,price:g,pin:D})};fetch("http://localhost:3000/c_orders/limit_order",e).then((function(e){return e.json()})).then((function(e){if(e&&e.message)i(e.message),F("");else{i("".concat(e.side.toUpperCase()," order at $").concat(g," for ").concat(e.size," of ").concat(e.product_id," placed successfully"));var t={product_id:j,type:"LIMIT",side:U().toUpperCase(),price:g,size:v};l([].concat(Object(_.a)(o),[t])),m(0),x(0),F(""),k(!1)}}))}},B=function(e){i(""),F(e.target.value)};return s.a.useEffect((function(){return function(){!1===t&&(i(""),x(1),m(1))}})),Object(a.jsxs)("div",{className:"limit-order",children:[Object(a.jsx)("div",{className:"limit-title",children:"Limit Order"}),Object(a.jsxs)("div",{className:"input-group",style:{display:"flex",flexDirection:"column"},children:[Object(a.jsxs)(Z.a,{variant:"outlined",style:{width:"200px"},children:[Object(a.jsx)(ee.a,{id:"demo-simple-select-outlined-label",children:"Product"}),Object(a.jsx)(te.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:j,onChange:function(e){i(null),b("".concat(e.target.value))},label:"Age",children:!0===c?n.map((function(e,t){return"USDC"!==e.currency&&"USD"!==e.currency?Object(a.jsx)(ce.a,{value:"".concat(e.currency,"-USD"),children:e.currency},t):null})):r.map((function(e,t){return"USDC"!==e.currency&&"USD"!==e.currency?Object(a.jsx)(ce.a,{value:"".concat(e.currency,"-USD"),children:e.currency},t):null}))})]}),Object(a.jsx)(be.a,{type:"number",variant:"outlined",color:"primary",label:"Size",value:v,onChange:function(e){-1===Math.sign(e.target.value)?(i("Size must be positive"),m(-e.target.value)):1===Math.sign(e.target.value)?(i(""),m(e.target.value)):e.target.value.toString().includes("-")||!0===isNaN(e.target.value)?(i("Please enter a valid number value for size"),m(1)):(i("Size must be a valid number value greater than 0"),m(1))}}),Object(a.jsx)(be.a,{type:"number",variant:"outlined",color:"primary",label:"Limit Price ($)",value:g,onChange:function(e){-1===Math.sign(e.target.value)?(i("Price must be positive"),x(-e.target.value)):1===Math.sign(e.target.value)?(i(""),x(e.target.value)):e.target.value.toString().includes("-")||!0===isNaN(e.target.value)?(i("Please enter a valid number value for price"),x(1)):(i("Size must be af valid number value greater than 0"),x(1))}}),Object(a.jsx)(A.a,{style:{marginTop:"10px"},variant:"contained",color:"primary",onClick:function(){k(!0)},children:"Enter Pin"})]}),Object(a.jsx)("div",{className:"pin-container",children:S?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"pin-label",children:"Please enter the pin"}),Object(a.jsx)(je.a,{style:{width:"100px",height:"20px"},value:D,type:"password",onChange:B}),Object(a.jsx)(A.a,{style:{width:"100%"},color:"secondary",variant:"contained",onClick:T,children:"PLACE ORDER"})]}):null})]})}function ve(e){var t=e.modal,c=e.activeAccounts,n=e.orders,r=e.setOrders,i=s.a.useState(!1),o=Object(C.a)(i,2),l=o[0],u=o[1],d=s.a.useState(!1),j=Object(C.a)(d,2),b=j[0],h=j[1],p=s.a.useState([]),v=Object(C.a)(p,2),m=v[0],O=v[1],f=s.a.useState(null),g=Object(C.a)(f,2),x=g[0],y=g[1];return s.a.useEffect((function(){0===m.length&&fetch("http://localhost:3000/c_accounts",{method:"GET",headers:{"Content-Type":"application/json",Accepts:"application/json"}}).then((function(e){return e.json()})).then((function(e){O(e)}))})),Object(a.jsxs)("div",{className:"modal-content",children:[Object(a.jsx)("div",{className:"modal-title",children:"Place an Order"}),Object(a.jsxs)("div",{className:"switch-group",children:[Object(a.jsx)(de,{type:"action",buy:l,toggleBuy:u}),Object(a.jsx)(de,{type:"order",marketOrder:b,toggleMarketOrder:h,setMessage:y})]}),Object(a.jsx)("div",{className:"order-container",children:b?Object(a.jsx)(pe,{action:l,activeAccounts:c,allAccounts:m,setMessage:y,orders:n,setOrders:r,modal:t}):Object(a.jsx)(he,{action:l,activeAccounts:c,allAccounts:m,setMessage:y,orders:n,setOrders:r,modal:t})}),Object(a.jsx)("div",{className:"message-container",children:x?Object(a.jsx)("h4",{children:x}):void 0})]})}function me(e){var t=e.setActivePage,c=e.activePage,n=e.activeSection,r=s.a.useState(!1),i=Object(C.a)(r,2),o=i[0],l=i[1],u=s.a.useState([]),d=Object(C.a)(u,2),j=d[0],b=d[1],h=s.a.useState([]),p=Object(C.a)(h,2),v=p[0],m=p[1];s.a.useEffect((function(){var e={headers:{"Content-Type":"application/json",Accepts:"application/json"}};fetch("https://coinbase-algo-backend.herokuapp.com/c_accounts",e).then((function(e){return e.json()})).then((function(e){if(e){var t=e.filter((function(e){return e.balance>0}));b(t)}})),fetch("https://coinbase-algo-backend.herokuapp.com/c_orders",e).then((function(e){return e.json()})).then((function(e){e&&m(e)}))}),[b,m]);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:o?"main-container blur":"main-container",onClick:function(){o&&l(!1)},children:[Object(a.jsx)("div",{className:"main-page-menu",children:Object(a.jsx)(P,{activePage:c,activateModal:function(){o||l(!0)}})}),Object(a.jsx)("div",{className:"active-page-container",children:function(){switch(c){case"home":return Object(a.jsx)(W,{setActivePage:t,activeAccounts:j,orders:v,setOrders:m});case"portfolio":return Object(a.jsx)(X,{activeAccounts:j});case"prices":return Object(a.jsx)(K,{activeAccounts:j});case"algorithms":return Object(a.jsx)(ie,{activeAccounts:j,activeSection:n});default:return Object(a.jsx)(W,{setActivePage:t,activeAccounts:j,orders:v})}}()})]}),Object(a.jsx)("div",{className:o?"modal-show":"modal-hide",children:Object(a.jsx)(ve,{modal:o,activeAccounts:j,orders:v,setOrders:m})})]})}var Oe=function(e){Object(u.a)(c,e);var t=Object(d.a)(c);function c(){var e;Object(o.a)(this,c);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={activePage:"home",activeSection:"h"},e.setActivePage=function(t){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h";e.setState({activePage:t,activeSection:c})},e}return Object(l.a)(c,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"app",children:[Object(a.jsx)(k,{activePage:this.state.activePage,setActivePage:this.setActivePage}),Object(a.jsx)(me,{activePage:this.state.activePage,activeSection:this.state.activeSection,setActivePage:this.setActivePage})]})}}]),c}(s.a.Component),fe=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,140)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),s(e),r(e)}))};i.a.render(Object(a.jsx)(Oe,{}),document.getElementById("root")),fe()}},[[94,1,2]]]);
//# sourceMappingURL=main.c77c68c3.chunk.js.map